


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
    <head>
            <meta name="viewport" content="width=device-width, initial-scale=1">
				<noscript><meta http-equiv="refresh" content="1260; url=ExecutePay?token=62868471-20210112121635-8B80B5AACD7C502711F11CDED35375D0.uat01-vm-hpp03&tokenResolved=62868471-20210112121635-8B80B5AACD7C502711F11CDED35375D0.uat01-vm-hpp03"></noscript>
            <title></title>
            <link rel="stylesheet" type="text/css" href="style.css"> 
    </head>
    <body class="content custom_body">
        <div class="container_12 clearfix">
			[[FORM INSERT]]

                <span class="custom_showInputInfo hide"></span>
                <span class="custom_activateFieldValidation hide"></span>
                <span class="custom_showTooltip hide"></span>
                <span class="custom_choosePaymentSelection hide"></span>

</div>
	<script type="text/javascript" src="https://test.ppipe.net/hpp/resource/js/hpp.js">


      	console.log('DoPay');

	</script>
    <script type="text/javascript">
        (function($) {

    var defaultChallengeWindow = 5;

    var BROWSER_LANGUAGE = 'browserDataBuilder.language',
        BROWSER_SCREEN_HEIGHT = 'browserDataBuilder.screenHeight',
        BROWSER_SCREEN_WIDTH = 'browserDataBuilder.screenWidth',
        BROWSER_TIMEZONE = 'browserDataBuilder.timeZone',
        BROWSER_USERAGENT = 'browserDataBuilder.userAgent',
        BROWSER_JAVAENABLED = 'browserDataBuilder.javaEnabled',
        BROWSER_JAVASCRIPT_ENABLED = 'browserDataBuilder.javascriptEnabled',
        BROWSER_SCREEN_COLOR_DEPTH = 'browserDataBuilder.colorDepth',
        BROWSER_CHALLENGE_WINDOW = 'browserDataBuilder.challengeWindow';

    // Please refer to EMV 3-D secure protocol and core functions spec V2.1.0 PDF
    var challengeWindow =
    [
        { "width": 600, "result": 4 },
        { "width": 500, "result": 3 },
        { "width": 390, "result": 2 },
        { "width": 250, "result": 1 }
    ];

    function calculateTimezone()
    {
        var d = new Date();
        return d.getTimezoneOffset();
    }

    function calculateChallengeWindow(containerWidth)
    {
        // Calculate best fit
        var width = containerWidth;
        for (var i=0; i < challengeWindow.length; i++)
        {
            if (width >= challengeWindow[i].width)
                return challengeWindow[i].result;
        }

        // Not able to determine the challenge window, use default
        return defaultChallengeWindow;
    }

            $(function() {

                function addBrowserInfo($container)
                {
                    var browserInfo = getBrowserInfo($container);
                    for ( var key in browserInfo ){
                        var $element = $("<input/>", {
                            "name": key,
                            "type": "hidden",
                            "id": key,
                            "value": browserInfo[key]
                        })
                        $container.append($element);
                    }
                }

                function getBrowserInfo($container)
                {
                    var resultFields = {};

                    asParam(BROWSER_JAVASCRIPT_ENABLED, true, resultFields);

                    if (navigator) {
                        asParam(BROWSER_LANGUAGE, navigator.language, resultFields );
                        asParam(BROWSER_USERAGENT, navigator.userAgent, resultFields );
                        asParam(BROWSER_JAVAENABLED, navigator.javaEnabled(), resultFields );
                    }

                    if (screen) {
                        asParam(BROWSER_SCREEN_HEIGHT, screen.height, resultFields );
                        asParam(BROWSER_SCREEN_WIDTH, screen.width, resultFields );
                        asParam(BROWSER_SCREEN_COLOR_DEPTH, screen.colorDepth, resultFields );
                    }

                    if ($container) {
                        var cw = calculateChallengeWindow($container);
                        asParam(BROWSER_CHALLENGE_WINDOW, cw, resultFields );
                    }

                    asParam(BROWSER_TIMEZONE, calculateTimezone(), resultFields );
                    return resultFields;
                }

                function asParam(paramKey, paramValue, map)
                {
                    if (paramValue != null) {
                        map[paramKey] = paramValue;
                    }
                }

                function calculateChallengeWindowContainer($container)
                {
                    calculateChallengeWindow($container.width());
                }

                var $container = $('#browserInfo');
                addBrowserInfo($container);
            });
        })(jQuery);
    </script>
</body>
</html>
